<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>The Museum of Us</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400;700&family=Inter:wght@300;400;500&family=Playfair+Display:ital,wght@0,400;0,700;1,400&display=swap" rel="stylesheet">

    <style>
        /* --- RESET & VARIABLES --- */
        :root {
            --bg-deep: #0f172a;
            --rose-primary: #be123c;
            --rose-soft: #fda4af;
            --gold-accent: #fbbf24;
            --purple-haze: #312e81;
            --glass-surface: rgba(255, 255, 255, 0.05);
            --glass-border: rgba(255, 255, 255, 0.1);
            --text-main: #f8fafc;
            --text-muted: #94a3b8;
            
            --font-display: 'Playfair Display', serif;
            --font-body: 'Inter', sans-serif;
            --font-script: 'Dancing Script', cursive;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; -webkit-tap-highlight-color: transparent; }

        body {
            background-color: var(--bg-deep);
            background-image: linear-gradient(to bottom, #020617, #1e1b4b, #4c0519, #0f172a);
            min-height: 100vh;
            width: 100vw;
            overflow-x: hidden;
            font-family: var(--font-body);
            color: var(--text-main);
            position: relative;
        }

        /* --- BACKGROUND PARTICLES --- */
        #dust-canvas {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            pointer-events: none;
            z-index: 0;
        }

        /* --- HERO SECTION --- */
        .hero {
            height: 80vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            position: relative;
            z-index: 10;
            padding: 0 20px;
        }

        .hero-title {
            font-family: var(--font-display);
            font-size: 3rem;
            margin-bottom: 10px;
            opacity: 0;
            animation: fadeUp 1.5s ease forwards 0.5s;
            text-shadow: 0 0 30px rgba(253, 164, 175, 0.2);
        }

        .hero-sub {
            font-family: var(--font-script);
            font-size: 1.5rem;
            color: var(--rose-soft);
            opacity: 0;
            animation: fadeUp 1.5s ease forwards 1s;
        }

        .scroll-hint {
            position: absolute;
            bottom: 40px;
            font-size: 0.8rem;
            text-transform: uppercase;
            letter-spacing: 2px;
            opacity: 0;
            animation: fadeIn 1s ease forwards 2s, bounce 2s infinite 2s;
        }

        /* --- TIMELINE --- */
        .timeline {
            position: relative;
            max-width: 800px;
            margin: 0 auto;
            padding: 40px 20px;
            z-index: 5;
        }

        /* The Line */
        .timeline::before {
            content: '';
            position: absolute;
            top: 0;
            left: 20px; /* Mobile left alignment */
            height: 100%;
            width: 2px;
            background: linear-gradient(to bottom, transparent, var(--rose-soft), transparent);
            box-shadow: 0 0 15px var(--rose-soft);
        }

        @media (min-width: 768px) {
            .timeline::before { left: 50%; transform: translateX(-50%); }
        }

        /* Memory Block */
        .memory-block {
            position: relative;
            margin-bottom: 80px;
            padding-left: 50px; /* Space for line */
            opacity: 0;
            transform: translateY(50px);
            transition: all 0.8s cubic-bezier(0.22, 1, 0.36, 1);
        }

        .memory-block.visible {
            opacity: 1;
            transform: translateY(0);
        }

        @media (min-width: 768px) {
            .memory-block { padding-left: 0; width: 50%; }
            .memory-block:nth-child(odd) { left: 0; padding-right: 40px; text-align: right; }
            .memory-block:nth-child(even) { left: 50%; padding-left: 40px; text-align: left; }
            
            /* Dots for desktop */
            .memory-block::after {
                content: '';
                position: absolute;
                top: 20px;
                right: -6px; /* For odd */
                width: 12px; height: 12px;
                background: var(--bg-deep);
                border: 2px solid var(--gold-accent);
                border-radius: 50%;
                box-shadow: 0 0 10px var(--gold-accent);
                z-index: 10;
            }
            .memory-block:nth-child(even)::after {
                left: -6px; right: auto;
            }
        }

        /* Dots for mobile */
        @media (max-width: 767px) {
            .memory-block::after {
                content: '';
                position: absolute;
                top: 20px; left: 15px; /* On the line */
                width: 12px; height: 12px;
                background: var(--bg-deep);
                border: 2px solid var(--gold-accent);
                border-radius: 50%;
                box-shadow: 0 0 10px var(--gold-accent);
                z-index: 10;
            }
        }

        /* Glass Card */
        .glass-card {
            background: var(--glass-surface);
            backdrop-filter: blur(10px);
            border: 1px solid var(--glass-border);
            border-radius: 16px;
            padding: 15px;
            overflow: hidden;
            transition: transform 0.3s;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }

        .glass-card:hover {
            transform: translateY(-5px);
            border-color: rgba(255,255,255,0.3);
        }

        .card-img-wrap {
            width: 100%;
            height: 200px;
            border-radius: 10px;
            overflow: hidden;
            margin-bottom: 15px;
            position: relative;
        }

        .card-img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transform: scale(1.1); /* Start zoomed in slightly */
            transition: transform 3s ease; /* Slow zoom effect */
        }

        .memory-block.visible .card-img {
            transform: scale(1);
        }

        .card-title {
            font-family: var(--font-display);
            font-size: 1.2rem;
            color: var(--rose-soft);
            margin-bottom: 8px;
        }

        .card-text {
            font-size: 0.9rem;
            line-height: 1.6;
            color: rgba(255,255,255,0.8);
        }

        /* --- SPECIAL INTERACTION: FOGGY REVEAL --- */
        .fog-container {
            position: relative;
            width: 100%;
            height: 200px;
            border-radius: 10px;
            overflow: hidden;
            cursor: pointer;
            margin-bottom: 15px;
        }

        .hidden-img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            position: absolute;
            top: 0; left: 0;
        }

        canvas.fog-canvas {
            position: absolute;
            top: 0; left: 0;
            width: 100%; height: 100%;
            z-index: 2;
            touch-action: none; /* Prevent scroll while rubbing */
        }

        .fog-hint {
            position: absolute;
            top: 50%; left: 50%;
            transform: translate(-50%, -50%);
            z-index: 3;
            pointer-events: none;
            font-family: var(--font-script);
            font-size: 1.2rem;
            color: rgba(255,255,255,0.8);
            text-shadow: 0 0 5px black;
            opacity: 1;
            transition: opacity 0.5s;
        }

        /* --- DAY COUNTER SECTION --- */
        .counter-section {
            text-align: center;
            padding: 100px 20px;
            opacity: 0;
            transition: opacity 1s;
        }
        .counter-section.visible { opacity: 1; }

        .big-number {
            font-family: var(--font-display);
            font-size: 5rem;
            color: white;
            line-height: 1;
            text-shadow: 0 0 30px var(--rose-primary);
            background: linear-gradient(to bottom, #fff, var(--rose-soft));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .counter-label {
            margin-top: 10px;
            font-size: 1rem;
            text-transform: uppercase;
            letter-spacing: 3px;
            color: var(--text-muted);
        }

        /* --- ENDING --- */
        .footer {
            padding: 50px 20px 100px 20px;
            text-align: center;
        }

        .next-btn {
            background: transparent;
            border: 1px solid var(--rose-soft);
            color: var(--text-main);
            padding: 16px 40px;
            border-radius: 50px;
            font-family: var(--font-body);
            font-size: 1rem;
            cursor: pointer;
            transition: 0.3s;
            box-shadow: 0 0 20px rgba(253, 164, 175, 0.1);
        }

        .next-btn:hover {
            background: var(--rose-soft);
            color: #000;
            box-shadow: 0 0 40px rgba(253, 164, 175, 0.4);
        }

        /* --- ANIMATIONS --- */
        @keyframes fadeUp {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }
        @keyframes fadeIn { to { opacity: 1; } }
        @keyframes bounce { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(10px); } }

    </style>
</head>
<body>

    <canvas id="dust-canvas"></canvas>

    <div class="hero">
        <h1 class="hero-title">The Museum of Us</h1>
        <div class="hero-sub">Every moment... a masterpiece.</div>
        <div class="scroll-hint">Scroll to explore</div>
    </div>

    <div class="timeline">

        <div class="memory-block">
            <div class="glass-card">
                <div class="card-img-wrap">
                    <img src="https://images.unsplash.com/photo-1516589178581-6cd7833ae3b2?auto=format&fit=crop&w=600&q=80" class="card-img" alt="Beginning">
                </div>
                <div class="card-title">Where it all began</div>
                <div class="card-text">The day you walked into my life and everything felt different. The colors seemed brighter, and the noise of the world finally went quiet.</div>
            </div>
        </div>

        <div class="memory-block">
            <div class="glass-card">
                <div class="card-img-wrap">
                    <img src="https://images.unsplash.com/photo-1523438097201-512ae7d59c44?auto=format&fit=crop&w=600&q=80" class="card-img" alt="Adventure">
                </div>
                <div class="card-title">Our first adventure</div>
                <div class="card-text">Two hearts, one road, and a thousand laughs. I remember looking at you and thinking, "I could go anywhere as long as it's with you."</div>
            </div>
        </div>

        <div class="memory-block">
            <div class="glass-card">
                <div class="fog-container" id="fogContainer">
                    <img src="https://images.unsplash.com/photo-1518568814500-bf0f8d125f46?auto=format&fit=crop&w=600&q=80" class="hidden-img" alt="Hidden">
                    <canvas class="fog-canvas" id="fogCanvas"></canvas>
                    <div class="fog-hint" id="fogHint">Wipe to reveal</div>
                </div>
                <div class="card-title">A Precious Secret</div>
                <div class="card-text">Some memories are too precious to show the world. This one belongs only to us.</div>
            </div>
        </div>

        <div class="memory-block">
            <div class="glass-card">
                <div class="card-img-wrap">
                    <img src="https://images.unsplash.com/photo-1516233758813-a38d024919c5?auto=format&fit=crop&w=600&q=80" class="card-img" alt="Quiet">
                </div>
                <div class="card-title">A Quiet Moment</div>
                <div class="card-text">Sometimes, the best memories are the silent ones. Just holding hands, watching the world go by, knowing I'm exactly where I belong.</div>
            </div>
        </div>

    </div>

    <div class="counter-section" id="counterSection">
        <div class="big-number" id="dayCounter">0</div>
        <div class="counter-label">Days since I fell for you</div>
    </div>

    <div class="footer">
        <button class="next-btn" onclick="nextPage()">Open the time capsule &rarr;</button>
    </div>

    <script>
        /* --- BACKGROUND DUST --- */
        const canvas = document.getElementById('dust-canvas');
        const ctx = canvas.getContext('2d');
        let width, height;
        let particles = [];

        function initParticles() {
            width = window.innerWidth;
            height = window.innerHeight;
            canvas.width = width;
            canvas.height = height;
            particles = [];
            for(let i=0; i<50; i++) {
                particles.push({
                    x: Math.random() * width,
                    y: Math.random() * height,
                    r: Math.random() * 1.5,
                    d: Math.random() * 0.5
                });
            }
        }

        function drawParticles() {
            ctx.clearRect(0, 0, width, height);
            ctx.fillStyle = "rgba(255, 255, 255, 0.4)";
            particles.forEach(p => {
                ctx.beginPath();
                ctx.arc(p.x, p.y, p.r, 0, Math.PI*2);
                ctx.fill();
                p.y -= p.d;
                if(p.y < 0) p.y = height;
            });
            requestAnimationFrame(drawParticles);
        }
        window.addEventListener('resize', initParticles);
        initParticles();
        drawParticles();

        /* --- SCROLL ANIMATIONS --- */
        const observerOptions = { threshold: 0.2 };
        
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if(entry.isIntersecting) {
                    entry.target.classList.add('visible');
                    // Once visible, we can stop observing it
                    // observer.unobserve(entry.target); 
                }
            });
        }, observerOptions);

        document.querySelectorAll('.memory-block').forEach(el => observer.observe(el));

        /* --- DAY COUNTER --- */
        const counterSection = document.getElementById('counterSection');
        const counterElement = document.getElementById('dayCounter');
        let counterStarted = false;

        const counterObserver = new IntersectionObserver((entries) => {
            if(entries[0].isIntersecting && !counterStarted) {
                counterStarted = true;
                counterSection.classList.add('visible');
                animateValue(counterElement, 0, 487, 2500); // Count to 487
            }
        });
        counterObserver.observe(counterSection);

        function animateValue(obj, start, end, duration) {
            let startTimestamp = null;
            const step = (timestamp) => {
                if (!startTimestamp) startTimestamp = timestamp;
                const progress = Math.min((timestamp - startTimestamp) / duration, 1);
                // Ease out quart
                const ease = 1 - Math.pow(1 - progress, 4);
                obj.innerHTML = Math.floor(ease * (end - start) + start);
                if (progress < 1) {
                    window.requestAnimationFrame(step);
                }
            };
            window.requestAnimationFrame(step);
        }

        /* --- FOGGY REVEAL LOGIC --- */
        const fogCanvas = document.getElementById('fogCanvas');
        const fogCtx = fogCanvas.getContext('2d');
        const fogHint = document.getElementById('fogHint');
        const fogContainer = document.getElementById('fogContainer');
        let isDrawing = false;

        function initFog() {
            // Match container size
            const rect = fogContainer.getBoundingClientRect();
            fogCanvas.width = rect.width;
            fogCanvas.height = rect.height;

            // Fill with "Fog"
            fogCtx.fillStyle = "rgba(200, 210, 230, 0.85)"; // Milky white/blue
            fogCtx.fillRect(0, 0, fogCanvas.width, fogCanvas.height);
            
            // Set blending mode for erasing
            fogCtx.globalCompositeOperation = 'destination-out';
        }

        // Handle Resize
        // Note: Real implementation would need debouncing and repainting logic
        // but for this snippet we init once.
        setTimeout(initFog, 500); // Wait for layout

        function getPos(e) {
            const rect = fogCanvas.getBoundingClientRect();
            let x, y;
            if(e.touches) {
                x = e.touches[0].clientX - rect.left;
                y = e.touches[0].clientY - rect.top;
            } else {
                x = e.clientX - rect.left;
                y = e.clientY - rect.top;
            }
            return {x, y};
        }

        function scratch(e) {
            if(!isDrawing) return;
            e.preventDefault(); // Stop scroll inside canvas
            
            const pos = getPos(e);
            
            fogCtx.beginPath();
            fogCtx.arc(pos.x, pos.y, 25, 0, Math.PI*2); // Brush size
            fogCtx.fill();

            // Hide hint on first interaction
            fogHint.style.opacity = 0;
        }

        fogCanvas.addEventListener('mousedown', (e) => { isDrawing = true; scratch(e); });
        fogCanvas.addEventListener('mousemove', scratch);
        window.addEventListener('mouseup', () => isDrawing = false);

        fogCanvas.addEventListener('touchstart', (e) => { isDrawing = true; scratch(e); });
        fogCanvas.addEventListener('touchmove', scratch);
        window.addEventListener('touchend', () => isDrawing = false);

        /* --- NAVIGATION --- */
        function nextPage() {
            document.body.style.transition = "opacity 1.5s ease";
            document.body.style.opacity = 0;
            setTimeout(() => {
                window.location.href = "day_counter.html";
                alert("Entering the time capsule... (Next: Day Counter)");
            }, 1500);
        }

    </script>

</body>
</html>
