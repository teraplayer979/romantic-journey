<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Create Your Love Story</title>
<style>
body{
font-family:Arial;
background:#ff9a9e;
display:flex;
justify-content:center;
align-items:center;
height:100vh;
}
.card{
background:white;
padding:30px;
border-radius:20px;
width:350px;
text-align:center;
}
input,textarea{
width:100%;
padding:10px;
margin:8px 0;
border-radius:8px;
border:1px solid #ccc;
}
button{
background:#ff4d6d;
color:white;
padding:10px 20px;
border:none;
border-radius:20px;
cursor:pointer;
}
#linkBox{
margin-top:15px;
word-break:break-all;
font-size:12px;
}
</style>
</head>
<body>

<div class="card">
<h2>Create Your Love Story ❤️</h2>

<input id="user_name" placeholder="Your Name">
<input id="partner_name" placeholder="Partner Name">
<textarea id="mem_msg" placeholder="First Message"></textarea>
<input id="prop_question" value="Will you be mine forever?">

<button onclick="saveData()">Save & Generate Link</button>

<div id="linkBox"></div>
</div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/12.9.0/firebase-app.js";
import { getFirestore, collection, addDoc } from "https://www.gstatic.com/firebasejs/12.9.0/firebase-firestore.js";

const firebaseConfig = {
apiKey: "AIzaSyDCmtCRqCsM9g8M7qyNC2igzbn_TyH8ZYo",
authDomain: "romantic-journey-c65c9.firebaseapp.com",
projectId: "romantic-journey-c65c9",
storageBucket: "romantic-journey-c65c9.firebasestorage.app",
messagingSenderId: "758587730496",
appId: "1:758587730496:web:9e84e915296e930eb58da5"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

window.saveData = async function(){

const user_name = document.getElementById("user_name").value;
const partner_name = document.getElementById("partner_name").value;
const mem_msg = document.getElementById("mem_msg").value;
const prop_question = document.getElementById("prop_question").value;

const docRef = await addDoc(collection(db,"journeys"),{
user_name,
partner_name,
mem_msg,
prop_question
});

const link = window.location.origin + "/journey.html?id=" + docRef.id;

document.getElementById("linkBox").innerHTML =
"Send this link:<br><a href='"+link+"' target='_blank'>"+link+"</a>";
}
</script>

</body>
</html>
